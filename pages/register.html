<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<link href="../css/shop.css" type="text/css" rel="stylesheet" />
		<link href="../css/Sellerber.css" type="text/css" rel="stylesheet" />
		<link href="../css/bkg_ui.css" type="text/css" rel="stylesheet" />
		<link href="../font/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
		<script src="../js/jquery-1.9.1.min.js" type="text/javascript"></script>
		<script type="text/javascript" src="../js/Validform/Validform.min.js"></script>
		<script type="text/javascript" src="../js/jquery.cookie.js"></script>
		<script src="../js/shopFrame.js" type="text/javascript"></script>
		<script src="../js/Sellerber.js" type="text/javascript"></script>
		<script src="../js/layer/layer.js" type="text/javascript"></script>
		<title>注册</title>
	</head>
	<body>
		<div class="margin add_administrator" id="page_style">
			<div class="add_style add_administrator_style">
				<div class="title_name">用户注册</div>
				<form action="" method="post" id="form-admin-add">
					<ul>
						<li class="clearfix">
							<label class="label_name col-xs-2 col-lg-2"><i>*</i>姓名：</label>
							<div class="formControls col-xs-6">
								<input type="text" class="input-text col-xs-12" value="" placeholder="" id="name"
									name="name" datatype="*2-16" nullmsg="姓名不能为空">
							</div>
							<div class="col-4"> <span class="Validform_checktip"></span></div>
						</li>
						<li class="clearfix">
							<label class="label_name col-xs-2 col-lg-2"><i>*</i>昵称：</label>
							<div class="formControls col-xs-6">
								<input type="text" class="input-text col-xs-12" value="" placeholder="" id="nickName"
									name="nickName" datatype="*2-16" nullmsg="昵称不能为空">
							</div>
							<div class="col-4"> <span class="Validform_checktip"></span></div>
						</li>
						<li class="clearfix">
							<label class="label_name col-xs-2 col-lg-2"><i class="c-red">*</i>初始密码：</label>
							<div class="formControls col-xs-6">
								<input type="password" placeholder="密码" name="password" id="password" autocomplete="off"
									value="" class="input-text col-xs-12" datatype="*6-20" nullmsg="密码不能为空">
							</div>
							<div class="col-4"> <span class="Validform_checktip"></span></div>
						</li>
						<li class="clearfix">
							<label class="label_name col-xs-2 col-lg-2"><i class="c-red">*</i>确认密码：</label>
							<div class="formControls  col-xs-6">
								<input type="password" placeholder="确认新密码" autocomplete="off"
									class="input-text Validform_error  col-xs-12" errormsg="您两次输入的密码不一致！" datatype="*"
									nullmsg="请再输入一次新密码！" recheck="password" id="password2" name="password2">
							</div>
							<div class="col-4"> <span class="Validform_checktip"></span></div>
						</li>
						<li class="clearfix">
							<label class="label_name col-xs-2 col-lg-2"><i class="c-red">*</i>性&nbsp;别：</label>
							<div class="formControls  skin-minimal col-xs-6">
								<label><input id="gender" name="gender" type="radio" class="ace" value="unknow" checked="checked"><span
										class="lbl">保密</span></label>&nbsp;&nbsp;
								<label><input id="gender" name="gender" type="radio" class="ace" value="男"><span
										class="lbl">男</span></label>&nbsp;&nbsp;
								<label><input id="gender" name="gender" type="radio" class="ace" value="女"><span
										class="lbl">女</span></label>
							</div>
						</li>
						<li class="clearfix">
							<label class="label_name col-xs-2 col-lg-2"><i class="c-red">*</i>年&nbsp;龄：</label>
							<div class="formControls  skin-minimal col-xs-6">
								<input type="text" class="input-text col-xs-12" value="" placeholder="" id="age"
									name="age" datatype="*2-16" nullmsg="年龄不能为空">
							</div>
						</li>
						<li class="clearfix">
							<label class="label_name col-xs-2 col-lg-2"><i class="c-red">*</i>手&nbsp;机：</label>
							<div class="formControls col-xs-6">
								<input type="text" class="input-text col-xs-12" value="" placeholder="" id="phone"
									name="phone" datatype="m" nullmsg="手机不能为空">
							</div>
							<div class="col-4"> <span class="Validform_checktip"></span></div>
						</li>
						<li class="clearfix">
							<label class="label_name col-xs-2 col-lg-2"><i class="c-red">*</i>邮&nbsp;箱：</label>
							<div class="formControls col-xs-6">
								<input type="text" class="input-text col-xs-12" placeholder="@" name="email" id="email"
									datatype="e" nullmsg="请输入邮箱！">
							</div>
							<div class="col-4"> <span class="Validform_checktip"></span></div>
						</li>
						<li class="clearfix">
							<label class="label_name col-xs-2 col-lg-2"><i class="c-red">*</i>地&nbsp;址：</label>
							<div class="formControls col-xs-6">
								<input type="text" class="input-text col-xs-12" placeholder="" name="addreee"
									id="address" nullmsg="请输入地址！">
							</div>
							<div class="col-4"> <span class="Validform_checktip"></span></div>
						</li>
						<li class="clearfix">
							<div class="col-xs-2 col-lg-2">&nbsp;</div>
							<div class="col-xs-6">
								<input class="btn button_btn bg-deep-blue " type="submit" id="Add_Administrator"
									value="提交注册">
								<input name="reset" type="reset" class="btn button_btn btn-gray" value="取消重置" />
								<a href="javascript:ovid()" onclick="javascript :history.back(-1);"
									class="btn btn-info button_btn"><i class="fa fa-reply"></i> 返回上一步</a>
							</div>
						</li>
					</ul>
				</form>
			</div>
		</div>
	</body>
</html>
<script>
	//表单验证提交
	$("#form-admin-add").Validform({
		tiptype: 2,
		callback: function(data) {
			//form[0].submit();
			if (data.status == 1) {
				layer.msg(data.info, {
					icon: data.status,
					time: 1000
				}, function() {
					location.reload(); //刷新页面 
				});
			} else {
				layer.msg(data.info, {
					icon: data.status,
					time: 3000
				});
			}
			var index = parent.$("#iframe").attr("src");
			parent.layer.close(index);
			//
		}
	});
	$("#form-admin-add").on("submit", function(event) {
		event.preventDefault();
		var parem = {
			"name": $("#name").val(),
			"gender": $("#gender:checked").val(),
			"age": $("#age").val(),
			"email": $("#email").val(),
			"password": $("#password").val(),
			"nickName": $("#nickName").val(),
			"phone": $("#phone").val(),
			"address": $("#address").val()
		};
		$.ajax({
			url: "http://localhost:80/register",
			type: "POST",
			dataType: "json",
			data: parem,
			success: function(result) {
				if (result.code == 200) {
					alert(result.message);
					location.href = "../login.html";
				} else{
					alert(result.message);
				}
			},
			error: function(xhr) {
				alert("请求出错：" + xhr.status)
			}
		});
		
	});
</script>
